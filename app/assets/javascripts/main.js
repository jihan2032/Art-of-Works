"use strict";function getData(){return JSON.parse(jsonstr.replace(/=>/g,":").replace(/nil/g,"0"))}function getChapters(a,b,c){return a.filter(function(a){return(0===c||a.parent_id===c)&&a.chapter_no===b})}function getMaxChapter(a){return a.reduce(function(a,b){return a.chapter_no>=b.chapter_no?a:b},{ch:0})}function hasChildren(a,b){for(var c=0;c<a.length;c++)if(b.id===a[c].parent_id)return!0;return!1}function getLeaves(a){for(var b=[],c=0;c<a.length;c++)hasChildren(a,a[c])||b.push(a[c]);return b}function getParent(a,b){for(var c=0;c<a.length;c++)if(a[c].id===b.parent_id)return a[c];return void 0}function buildTracks(){for(var a=getData(),b=[],c=getLeaves(a),d=0;d<c.length;d++)b.push(_buildTrack(a,c[d]));return b}function _buildTrack(a,b){var c=[],d=b;do c.push(d),d=getParent(a,d);while(d);return c.reverse()}function _buildTreeLevels(a){var b=getMaxChapter(a).chapter_no;maxChapterNumber=b;for(var c=new Array(b),d=0;b>d;d++)c[d]=getChapters(a,d+1,0);return c}function createSliderHTML(a,b){return'<div class="row"><div class="col-sm-2"><h5 class="v-center">Track: '+a+"</h5><p>"+b+' Like(s)</p></div><div class="col-sm-10"><div data-track-number="'+a+'" class="slider slider-'+a+'"></div></div></div>'}function chapterToSlideHTML(a){var b='<div data-parent-id="'+a.parent_id+'" data-id="'+a.id+'" class="slide"><div class="slide-content"><h5>'+a.title+'</h5><div class="extra-info"><p>Author: <a href="#" class="author">'+(a.author||"N/A")+'</a></p><p class="likes">'+(a.likes||0)+" like</p></div></div></div>";return b}function buildChapterSlides(){var a=getData(),b=_buildTreeLevels(a);return b.map(function(a){return a.map(function(a){return a.html=chapterToSlide(a),a})})}function getChapterSiblings(a,b){return a.filter(function(a){return b.parent_id===a.parent_id})}function getChapterChildren(a,b){return a.filter(function(a){return chapter.id===a.parent_id})}function clearSlick(a){for(;a.slick("slickRemove",0););}function replaceSlides(a,b){clearSlick(a),b.forEach(function(b,c,d){a.slick("slickAdd",b.html)})}var maxChapterNumber,tracks,quillEditor,jsonstr=jsonstr||'[{"chapter_no": 1, "id": 1, "title": "hello-1", "parent_id": 0},{"chapter_no": 2, "id": 2, "title": "hello-2", "parent_id": 1},{"chapter_no": 2, "id": 3, "title": "hello-3", "parent_id": 1},{"chapter_no": 2, "id": 4, "title": "hello-4", "parent_id": 1},{"chapter_no": 2, "id": 5, "title": "hello-5", "parent_id": 1},{"chapter_no": 3, "id": 6, "title": "hello-6", "parent_id": 2},{"chapter_no": 3, "id": 7, "title": "hello-7", "parent_id": 2},{"chapter_no": 3, "id": 8, "title": "hello-8", "parent_id": 2},{"chapter_no": 3, "id": 9, "title": "hello-9", "parent_id": 2},{"chapter_no": 3, "id": 10, "title": "hello-10", "parent_id": 3},{"chapter_no": 3, "id": 11, "title": "hello-11", "parent_id": 3},{"chapter_no": 3, "id": 12, "title": "hello-12", "parent_id": 3},{"chapter_no": 3, "id": 13, "title": "hello-13", "parent_id": 3},{"chapter_no": 3, "id": 14, "title": "hello-14", "parent_id": 4},{"chapter_no": 3, "id": 15, "title": "hello-15", "parent_id": 4},{"chapter_no": 3, "id": 16, "title": "hello-16", "parent_id": 4},{"chapter_no": 3, "id": 17, "title": "hello-17", "parent_id": 4},{"chapter_no": 3, "id": 18, "title": "hello-18", "parent_id": 5},{"chapter_no": 3, "id": 19, "title": "hello-19", "parent_id": 5},{"chapter_no": 3, "id": 20, "title": "hello-20", "parent_id": 5},{"chapter_no": 3, "id": 21, "title": "hello-21", "parent_id": 5},{"chapter_no": 4, "id": 22, "title": "hello-22", "parent_id": 6},{"chapter_no": 4, "id": 23, "title": "hello-23", "parent_id": 6},{"chapter_no": 4, "id": 24, "title": "hello-24", "parent_id": 6},{"chapter_no": 4, "id": 25, "title": "hello-25", "parent_id": 6},{"chapter_no": 4, "id": 26, "title": "hello-26", "parent_id": 7},{"chapter_no": 4, "id": 27, "title": "hello-27", "parent_id": 7},{"chapter_no": 4, "id": 28, "title": "hello-28", "parent_id": 7},{"chapter_no": 4, "id": 29, "title": "hello-29", "parent_id": 7},{"chapter_no": 4, "id": 30, "title": "hello-30", "parent_id": 8},{"chapter_no": 4, "id": 31, "title": "hello-31", "parent_id": 8},{"chapter_no": 4, "id": 32, "title": "hello-32", "parent_id": 8},{"chapter_no": 4, "id": 33, "title": "hello-33", "parent_id": 8},{"chapter_no": 4, "id": 34, "title": "hello-34", "parent_id": 9},{"chapter_no": 4, "id": 35, "title": "hello-35", "parent_id": 9},{"chapter_no": 4, "id": 36, "title": "hello-36", "parent_id": 10},{"chapter_no": 4, "id": 37, "title": "hello-37", "parent_id": 10},{"chapter_no": 4, "id": 38, "title": "hello-38", "parent_id": 11},{"chapter_no": 4, "id": 39, "title": "hello-39", "parent_id": 11},{"chapter_no": 4, "id": 40, "title": "hello-40", "parent_id": 11},{"chapter_no": 4, "id": 41, "title": "hello-41", "parent_id": 12},{"chapter_no": 4, "id": 42, "title": "hello-42", "parent_id": 12},{"chapter_no": 4, "id": 43, "title": "hello-43", "parent_id": 12},{"chapter_no": 4, "id": 44, "title": "hello-44", "parent_id": 12},{"chapter_no": 4, "id": 45, "title": "hello-45", "parent_id": 12},{"chapter_no": 4, "id": 46, "title": "hello-46", "parent_id": 13},{"chapter_no": 4, "id": 47, "title": "hello-47", "parent_id": 13},{"chapter_no": 4, "id": 48, "title": "hello-48", "parent_id": 14},{"chapter_no": 4, "id": 49, "title": "hello-49", "parent_id": 14},{"chapter_no": 4, "id": 50, "title": "hello-50", "parent_id": 15},{"chapter_no": 4, "id": 51, "title": "hello-51", "parent_id": 15},{"chapter_no": 4, "id": 52, "title": "hello-52", "parent_id": 15}]';tracks=buildTracks(),$(document).ready(function(){$("#editor").length>0&&(quillEditor=new Quill("#editor",{modules:{toolbar:{container:"#toolbar"},"link-tooltip":!0},theme:"snow"}));var a=$(".tracks").parent();a.length>0?$(tracks).each(function(b,c){var d=$(createSliderHTML(b+1,20)).appendTo(a).find(".slider");$(c).each(function(a,b){d.append(chapterToSlideHTML(b))}),d.slick({slidesToShow:3,slidesToScroll:1,centerPadding:"10px",centerMode:!0,adaptiveHeight:!0,draggable:!1,infinite:!0})}):$(".slider").slick({slidesToShow:3,slidesToScroll:1,centerPadding:"10px",centerMode:!0,adaptiveHeight:!0,draggable:!1,infinite:!0})}),$(document).on("click",".slide",function(){var a=$(this),b=a.closest(".slider"),c=a.data("slick-index");return a.hasClass("slick-center")?(window.location="hello-world.html",!1):void b.slick("slickGoTo",c)}),$(document).on("beforeChange",".slider",function(a,b,c,d){$(b.$slides[c]).blur()}),$(document).on("init",".slider",function(a,b){b.$slides.length>3&&$(".slick-center").removeClass("slick-center")}),$(document).on("submit","#new_chapter",function(a){return $(this).find("textarea").val(quillEditor.getHTML()),!0});