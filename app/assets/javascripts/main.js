"use strict";function getData(){return JSON.parse(jsonstr.replace(/=>/g,":").replace(/nil/g,"0"))}function getChapters(a,b,c){return a.filter(function(a){return(0===c||a.parent_id===c)&&a.chapter_no===b})}function getMaxChapter(a){return a.reduce(function(a,b){return a.chapter_no>=b.chapter_no?a:b},{ch:0})}function _buildTreeLevels(a){var b=getMaxChapter(a).chapter_no;maxChapterNumber=b;for(var c=new Array(b),d=0;b>d;d++)c[d]=getChapters(a,d+1,0);return c}function chapterToSlide(a){return'<div class="slide" id="'+a.id+'" data-parent="'+a.parent_id+'"><div class="slide-content"><h4>'+a.title+"</h4></div></div>"}function buildChapterSlides(){var a=getData(),b=_buildTreeLevels(a);return b.map(function(a){return a.map(function(a){return a.html=chapterToSlide(a),a})})}function getChapterSiblings(a,b){return a.filter(function(a){return b.parent_id===a.parent_id})}function getChapterChildren(a,b){return a.filter(function(a){return chapter.id===a.parent_id})}function replaceSlides(a,b){clearSlick(a),b.forEach(function(b,c,d){a.slick("slickAdd",b.html)})}function clearSlick(a){for(;a.slick("slickRemove",0););}var maxChapterNumber,chaptersTree,jsonstr=jsonstr||'[{"id"=>1, "title"=>"The start", "chapter_no"=>1, "parent_id"=>0, "novel_id"=>nil}]';chaptersTree=buildChapterSlides(),$(document).ready(function(){if($("#editor").length>0){new Quill("#editor",{modules:{toolbar:{container:"#toolbar"},"link-tooltip":!0},theme:"snow"})}$(".slider-1, .slider-2, .slider-3").slick({slidesToShow:3,centerPadding:"10px",centerMode:!0,adaptiveHeight:!0,draggable:!1}),$(chaptersTree).each(function(a,b){var c=$(".slider-"+(a+1));c.prop("data-chapter",a+1),$(b).each(function(a,b){c.slick("slickAdd",b.html)})})}),$(".slider-1").on("click",".slick-active.slick-center",function(){var a=$(".slider-1"),b=$(".slider-2"),c=$(".slider-3"),d=parseInt(a.prop("data-chapter")),e=parseInt(b.prop("data-chapter")),f=parseInt(c.prop("data-chapter"));1>=d||(replaceSlides(a,chaptersTree[d-2]),replaceSlides(b,chaptersTree[e-2]),replaceSlides(c,chaptersTree[f-2]),a.prop("data-chapter",d-1),b.prop("data-chapter",e-1),c.prop("data-chapter",f-1))}),$(".slider-2 .slick-center").on("click",function(){}),$(".slider-3").on("click",".slick-active.slick-center",function(){var a=$(".slider-1"),b=$(".slider-2"),c=$(".slider-3"),d=parseInt(a.prop("data-chapter")),e=parseInt(b.prop("data-chapter")),f=parseInt(c.prop("data-chapter"));f>=maxChapterNumber||(replaceSlides(a,chaptersTree[d]),replaceSlides(b,chaptersTree[e]),replaceSlides(c,chaptersTree[f]),a.prop("data-chapter",d+1),b.prop("data-chapter",e+1),c.prop("data-chapter",f+1))}),$(".slider-1").on("beforeChange",function(a,b,c,d){var e=b.$slides[d].id;$(".slider-2").slick("slickFilter","[data-parent="+e+"]")}),$(".slider-2").on("beforeChange",function(a,b,c,d){var e=b.$slides[d].id;$(".slider-3").slick("slickFilter","[data-parent="+e+"]")}),$(".slider-3").on("beforeChange",function(a,b,c,d){});
